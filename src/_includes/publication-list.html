{%- comment -%}
<!--
     This include accepts no parameters
     
     It is intended to next inside an <article class="post"> tag,
     i.e. within a top-level/default layout.
-->
{%- endcomment -%}

{% assign publications = site.publications | sort: 'date' | reverse %}

<div class="post-list-wrapper">
  <p class="badge">
    {{ publications.size }} {% if publications.size == 1 %}publication{% else %}publications{% endif %}.
  </p>

  {%- if publications.size > 0 -%}
  <ul class="post-list fa-ul">
    {% assign item_collection = site.collections | where: "label", "publications" | first %} 
    {%- for publication in site.publications -%}
    {%- assign articles = site.articles | where: 'publication', publication.path -%}
    {%- if articles.size > 0 -%}
    <li class="post-list-item">
      <i class="post-type fa fa-li {{ item_collection.icon_class}}" title="{{ item_collection.item_desc }}"></i>
      
      <a class="post-link" href="{{ publication.url | relative_url }}">
        {{ publication.title | escape }}
      </a>
      <span class="badge">
        {{ articles.size }} {% if articles.size == 1 %}article{% else %}articles{% endif %}
      </span>
    </li>
    {%- endif -%}
    {%- endfor -%}
  </ul>
  {%- endif -%}
</div>
